{"ast":null,"code":"import React,{useState}from'react';import'./LinkForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LinkForm(_ref){let{onAddLink}=_ref;const[title,setTitle]=useState('');const[url,setUrl]=useState('');const[iconBase64,setIconBase64]=useState('');const[category,setCategory]=useState('favorite');// по умолчанию в избранное?\nconst isValidUrl=value=>{try{new URL(value);return true;}catch(_unused){return false;}};const fetchWithTimeout=function(checkUrl,options){let timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3000;return Promise.race([fetch(checkUrl,options),new Promise((_,reject)=>setTimeout(()=>reject(new Error('timeout')),timeout))]);};const handleFileChange=e=>{const file=e.target.files[0];if(!file){setIconBase64('');return;}const reader=new FileReader();reader.onload=evt=>{const base64Data=evt.target.result;setIconBase64(base64Data);};reader.readAsDataURL(file);};const handleSubmit=async e=>{e.preventDefault();if(title.trim()===''||url.trim()==='')return;if(!isValidUrl(url)){alert('Пожалуйста, введите корректный URL, например, https://example.com');return;}try{await fetchWithTimeout(url,{method:'HEAD',mode:'no-cors'},3000);onAddLink({title,url,customIcon:iconBase64||'',category:category.trim(),createdAt:Date.now()});setTitle('');setUrl('');setIconBase64('');setCategory('favorite');e.target.reset();}catch(_unused2){alert('Сайт не найден или недоступен');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"link-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0438\",value:title,onChange:e=>setTitle(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"URL \\u0441\\u0430\\u0439\\u0442\\u0430 (https://...)\",value:url,onChange:e=>setUrl(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F (\\u043D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: favorite, \\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0435...)\",value:category,onChange:e=>setCategory(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"})]});}export default LinkForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","LinkForm","_ref","onAddLink","title","setTitle","url","setUrl","iconBase64","setIconBase64","category","setCategory","isValidUrl","value","URL","_unused","fetchWithTimeout","checkUrl","options","timeout","arguments","length","undefined","Promise","race","fetch","_","reject","setTimeout","Error","handleFileChange","e","file","target","files","reader","FileReader","onload","evt","base64Data","result","readAsDataURL","handleSubmit","preventDefault","trim","alert","method","mode","customIcon","createdAt","Date","now","reset","_unused2","onSubmit","className","children","type","placeholder","onChange","required","accept"],"sources":["C:/Users/axm/Documents/GitHub/Home-Page/src/components/LinkForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './LinkForm.css';\r\n\r\nfunction LinkForm({ onAddLink }) {\r\n  const [title, setTitle] = useState('');\r\n  const [url, setUrl] = useState('');\r\n  const [iconBase64, setIconBase64] = useState('');\r\n  const [category, setCategory] = useState('favorite'); // по умолчанию в избранное?\r\n\r\n  const isValidUrl = (value) => {\r\n    try {\r\n      new URL(value);\r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const fetchWithTimeout = (checkUrl, options, timeout = 3000) => {\r\n    return Promise.race([\r\n      fetch(checkUrl, options),\r\n      new Promise((_, reject) =>\r\n        setTimeout(() => reject(new Error('timeout')), timeout)\r\n      ),\r\n    ]);\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      setIconBase64('');\r\n      return;\r\n    }\r\n    const reader = new FileReader();\r\n    reader.onload = (evt) => {\r\n      const base64Data = evt.target.result;\r\n      setIconBase64(base64Data);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (title.trim() === '' || url.trim() === '') return;\r\n    if (!isValidUrl(url)) {\r\n      alert('Пожалуйста, введите корректный URL, например, https://example.com');\r\n      return;\r\n    }\r\n    try {\r\n      await fetchWithTimeout(url, { method: 'HEAD', mode: 'no-cors' }, 3000);\r\n      onAddLink({\r\n        title,\r\n        url,\r\n        customIcon: iconBase64 || '',\r\n        category: category.trim(),\r\n        createdAt: Date.now()\r\n      });\r\n      setTitle('');\r\n      setUrl('');\r\n      setIconBase64('');\r\n      setCategory('favorite');\r\n      e.target.reset();\r\n    } catch {\r\n      alert('Сайт не найден или недоступен');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"link-form\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Название ссылки\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        required\r\n      />\r\n\r\n      <input\r\n        type=\"url\"\r\n        placeholder=\"URL сайта (https://...)\"\r\n        value={url}\r\n        onChange={(e) => setUrl(e.target.value)}\r\n        required\r\n      />\r\n\r\n      <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\r\n\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Категория (например: favorite, Рабочие...)\"\r\n        value={category}\r\n        onChange={(e) => setCategory(e.target.value)}\r\n      />\r\n\r\n      <button type=\"submit\">Добавить ссылку</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default LinkForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
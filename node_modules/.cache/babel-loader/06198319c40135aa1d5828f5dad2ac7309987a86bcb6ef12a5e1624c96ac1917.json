{"ast":null,"code":"import React,{useState}from'react';import'./LinkForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LinkForm(_ref){let{onAddLink}=_ref;const[title,setTitle]=useState('');const[url,setUrl]=useState('');// Проверка корректности URL с помощью конструктора URL\nconst isValidUrl=value=>{try{new URL(value);return true;}catch(error){return false;}};// Функция для выполнения fetch с тайм-аутом\nconst fetchWithTimeout=function(url,options){let timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3000;return Promise.race([fetch(url,options),new Promise((_,reject)=>setTimeout(()=>reject(new Error('timeout')),timeout))]);};const handleSubmit=async e=>{e.preventDefault();if(title.trim()===''||url.trim()==='')return;if(!isValidUrl(url)){alert('Пожалуйста, введите корректный URL, например, https://example.com');return;}try{// Выполняем запрос с тайм-аутом (3 секунды)\nconst response=await fetchWithTimeout(url,{method:'HEAD',mode:'no-cors'},3000);// В режиме no-cors тип ответа будет \"opaque\", что считается успехом, если не произошло исключение.\nif(response&&(response.ok||response.type==='opaque')){onAddLink({title,url});setTitle('');setUrl('');}else{alert('Сайт не найден или недоступен');}}catch(error){alert('Сайт не найден или недоступен');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"link-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0438\",value:title,onChange:e=>setTitle(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"URL (\\u043D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, https://example.com)\",value:url,onChange:e=>setUrl(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"})]});}export default LinkForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","LinkForm","_ref","onAddLink","title","setTitle","url","setUrl","isValidUrl","value","URL","error","fetchWithTimeout","options","timeout","arguments","length","undefined","Promise","race","fetch","_","reject","setTimeout","Error","handleSubmit","e","preventDefault","trim","alert","response","method","mode","ok","type","onSubmit","className","children","placeholder","onChange","target","required"],"sources":["C:/Users/axm/Documents/sites/Pet-projects/custom-newtab-extension/src/components/LinkForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './LinkForm.css';\r\n\r\nfunction LinkForm({ onAddLink }) {\r\n  const [title, setTitle] = useState('');\r\n  const [url, setUrl] = useState('');\r\n\r\n  // Проверка корректности URL с помощью конструктора URL\r\n  const isValidUrl = (value) => {\r\n    try {\r\n      new URL(value);\r\n      return true;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Функция для выполнения fetch с тайм-аутом\r\n  const fetchWithTimeout = (url, options, timeout = 3000) => {\r\n    return Promise.race([\r\n      fetch(url, options),\r\n      new Promise((_, reject) =>\r\n        setTimeout(() => reject(new Error('timeout')), timeout)\r\n      )\r\n    ]);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (title.trim() === '' || url.trim() === '') return;\r\n\r\n    if (!isValidUrl(url)) {\r\n      alert('Пожалуйста, введите корректный URL, например, https://example.com');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Выполняем запрос с тайм-аутом (3 секунды)\r\n      const response = await fetchWithTimeout(url, {\r\n        method: 'HEAD',\r\n        mode: 'no-cors'\r\n      }, 3000);\r\n\r\n      // В режиме no-cors тип ответа будет \"opaque\", что считается успехом, если не произошло исключение.\r\n      if (response && (response.ok || response.type === 'opaque')) {\r\n        onAddLink({ title, url });\r\n        setTitle('');\r\n        setUrl('');\r\n      } else {\r\n        alert('Сайт не найден или недоступен');\r\n      }\r\n    } catch (error) {\r\n      alert('Сайт не найден или недоступен');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"link-form\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Название ссылки\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        required\r\n      />\r\n      <input\r\n        type=\"url\"\r\n        placeholder=\"URL (например, https://example.com)\"\r\n        value={url}\r\n        onChange={(e) => setUrl(e.target.value)}\r\n        required\r\n      />\r\n      <button type=\"submit\">Добавить ссылку</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default LinkForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"C:/Users/axm/Documents/GitHub/Home-Page/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./TodoWidget.css';import{FaCheckCircle,FaTimesCircle}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function getTaskWord(count){const lastTwo=count%100;const lastOne=count%10;if(lastTwo>=11&&lastTwo<=14){return'задач';}else if(lastOne===1){return'задача';}else if(lastOne>=2&&lastOne<=4){return'задачи';}else{return'задач';}}function TodoWidget(_ref){let{theme}=_ref;const[tasks,setTasks]=useState([]);const[isModalOpen,setIsModalOpen]=useState(false);const[titleInput,setTitleInput]=useState('');const[descriptionInput,setDescriptionInput]=useState('');useEffect(()=>{const storedTasks=localStorage.getItem('advancedTodoTasks');if(storedTasks){setTasks(JSON.parse(storedTasks));}},[]);useEffect(()=>{localStorage.setItem('advancedTodoTasks',JSON.stringify(tasks));},[tasks]);// Удаление выполненных задач через 24 часа\nuseEffect(()=>{const interval=setInterval(()=>{const now=Date.now();setTasks(prev=>prev.filter(t=>!t.completed||now-t.completedAt<24*60*60*1000));},60*1000);return()=>clearInterval(interval);},[]);const openModal=()=>setIsModalOpen(true);const closeModal=e=>{e.stopPropagation();setIsModalOpen(false);};const handleWidgetClick=()=>openModal();const handleAddTask=()=>{if(titleInput.trim()==='')return;const newTask={id:Date.now(),title:titleInput.trim(),description:descriptionInput.trim(),completed:false,completedAt:null,createdAt:Date.now()};setTasks(prev=>[...prev,newTask]);setTitleInput('');setDescriptionInput('');};const toggleTask=id=>{setTasks(prev=>prev.map(task=>task.id===id?_objectSpread(_objectSpread({},task),{},{completed:!task.completed,completedAt:task.completed?null:Date.now()}):task));};const removeTask=id=>{setTasks(prev=>prev.filter(task=>task.id!==id));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"todo-widget widget\",onClick:handleWidgetClick,children:[/*#__PURE__*/_jsx(\"div\",{className:\"todo-small-title\",children:\"TODO\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0423 \\u0432\\u0430\\u0441 \",tasks.length,\" \",getTaskWord(tasks.length)]})]}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay \".concat(theme==='dark'?'dark-overlay':''),onClick:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-modal\",onClick:closeModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"modal-title\",children:\"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u0434\\u0435\\u043B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"todo-inputs\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"task-input\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438...\",value:titleInput,onChange:e=>setTitleInput(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"task-input\",placeholder:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 (\\u043D\\u0435\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E)...\",value:descriptionInput,onChange:e=>setDescriptionInput(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"add-task-btn\",onClick:handleAddTask,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"todo-list\",children:tasks.map(task=>/*#__PURE__*/_jsxs(\"li\",{className:\"todo-item \".concat(task.completed?'completed':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"todo-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:task.title}),task.description&&/*#__PURE__*/_jsx(\"p\",{children:task.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"todo-actions\",children:[/*#__PURE__*/_jsx(FaCheckCircle,{className:\"todo-check \".concat(task.completed?'checked':''),onClick:()=>toggleTask(task.id)}),/*#__PURE__*/_jsx(FaTimesCircle,{className:\"todo-delete\",onClick:()=>removeTask(task.id)})]})]},task.id))})]})})]});}export default TodoWidget;","map":{"version":3,"names":["React","useState","useEffect","FaCheckCircle","FaTimesCircle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getTaskWord","count","lastTwo","lastOne","TodoWidget","_ref","theme","tasks","setTasks","isModalOpen","setIsModalOpen","titleInput","setTitleInput","descriptionInput","setDescriptionInput","storedTasks","localStorage","getItem","JSON","parse","setItem","stringify","interval","setInterval","now","Date","prev","filter","t","completed","completedAt","clearInterval","openModal","closeModal","e","stopPropagation","handleWidgetClick","handleAddTask","trim","newTask","id","title","description","createdAt","toggleTask","map","task","_objectSpread","removeTask","children","className","onClick","length","concat","type","placeholder","value","onChange","target"],"sources":["C:/Users/axm/Documents/GitHub/Home-Page/src/components/widgets/TodoWidget.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './TodoWidget.css';\r\nimport { FaCheckCircle, FaTimesCircle } from 'react-icons/fa';\r\n\r\nfunction getTaskWord(count) {\r\n  const lastTwo = count % 100;\r\n  const lastOne = count % 10;\r\n\r\n  if (lastTwo >= 11 && lastTwo <= 14) {\r\n    return 'задач';\r\n  } else if (lastOne === 1) {\r\n    return 'задача';\r\n  } else if (lastOne >= 2 && lastOne <= 4) {\r\n    return 'задачи';\r\n  } else {\r\n    return 'задач';\r\n  }\r\n}\r\n\r\nfunction TodoWidget({ theme }) {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [titleInput, setTitleInput] = useState('');\r\n  const [descriptionInput, setDescriptionInput] = useState('');\r\n\r\n  useEffect(() => {\r\n    const storedTasks = localStorage.getItem('advancedTodoTasks');\r\n    if (storedTasks) {\r\n      setTasks(JSON.parse(storedTasks));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('advancedTodoTasks', JSON.stringify(tasks));\r\n  }, [tasks]);\r\n\r\n  // Удаление выполненных задач через 24 часа\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const now = Date.now();\r\n      setTasks((prev) =>\r\n        prev.filter((t) => !t.completed || now - t.completedAt < 24 * 60 * 60 * 1000)\r\n      );\r\n    }, 60 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const openModal = () => setIsModalOpen(true);\r\n  const closeModal = (e) => {\r\n    e.stopPropagation();\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleWidgetClick = () => openModal();\r\n\r\n  const handleAddTask = () => {\r\n    if (titleInput.trim() === '') return;\r\n    const newTask = {\r\n      id: Date.now(),\r\n      title: titleInput.trim(),\r\n      description: descriptionInput.trim(),\r\n      completed: false,\r\n      completedAt: null,\r\n      createdAt: Date.now(),\r\n    };\r\n    setTasks((prev) => [...prev, newTask]);\r\n    setTitleInput('');\r\n    setDescriptionInput('');\r\n  };\r\n\r\n  const toggleTask = (id) => {\r\n    setTasks((prev) =>\r\n      prev.map((task) =>\r\n        task.id === id\r\n          ? { ...task, completed: !task.completed, completedAt: task.completed ? null : Date.now() }\r\n          : task\r\n      )\r\n    );\r\n  };\r\n\r\n  const removeTask = (id) => {\r\n    setTasks((prev) => prev.filter((task) => task.id !== id));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Виджет TODO */}\r\n      <div className=\"todo-widget widget\" onClick={handleWidgetClick}>\r\n        <div className=\"todo-small-title\">TODO</div>\r\n        <div>\r\n          У вас {tasks.length} {getTaskWord(tasks.length)}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Модальное окно */}\r\n      {isModalOpen && (\r\n        <div\r\n          className={`modal-overlay ${theme === 'dark' ? 'dark-overlay' : ''}`}\r\n          onClick={closeModal}\r\n        >\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <button className=\"close-modal\" onClick={closeModal}>\r\n              ×\r\n            </button>\r\n            <h2 className=\"modal-title\">Список дел</h2>\r\n\r\n            {/* Поля ввода */}\r\n            <div className=\"todo-inputs\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"task-input\"\r\n                placeholder=\"Название задачи...\"\r\n                value={titleInput}\r\n                onChange={(e) => setTitleInput(e.target.value)}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                className=\"task-input\"\r\n                placeholder=\"Описание (необязательно)...\"\r\n                value={descriptionInput}\r\n                onChange={(e) => setDescriptionInput(e.target.value)}\r\n              />\r\n              <button className=\"add-task-btn\" onClick={handleAddTask}>\r\n                Добавить\r\n              </button>\r\n            </div>\r\n\r\n            {/* Список задач */}\r\n            <ul className=\"todo-list\">\r\n              {tasks.map((task) => (\r\n                <li key={task.id} className={`todo-item ${task.completed ? 'completed' : ''}`}>\r\n                  <div className=\"todo-text\">\r\n                    <strong>{task.title}</strong>\r\n                    {task.description && <p>{task.description}</p>}\r\n                  </div>\r\n                  <div className=\"todo-actions\">\r\n                    <FaCheckCircle\r\n                      className={`todo-check ${task.completed ? 'checked' : ''}`}\r\n                      onClick={() => toggleTask(task.id)}\r\n                    />\r\n                    <FaTimesCircle className=\"todo-delete\" onClick={() => removeTask(task.id)} />\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TodoWidget;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}